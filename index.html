<!DOCTYPE html>
<html>
<head>
    <title>Fixed Floor Anchor</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        .ui { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            z-index: 1000; width: 80%; text-align: center;
        }
        button { 
            padding: 20px; width: 100%; background: #007bff; color: white; 
            border: none; border-radius: 10px; font-weight: bold; font-size: 18px;
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">

    <div class="ui">
        <button onclick="placeOnFloor()">PLACE ON FLOOR</button>
    </div>

    <a-scene embedded vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;">
        
        <a-entity id="rig" position="0 1.7 0">
            <a-camera id="cam" look-controls="enabled: true" rotation-reader></a-camera>
        </a-entity>

        <a-entity id="world"></a-entity>

    </a-scene>

    <script>
        function placeOnFloor() {
            const cam = document.querySelector('#cam');
            const world = document.querySelector('#world');
            
            // Get rotation
            const rot = cam.getAttribute('rotation');
            const angle = rot.y * (Math.PI / 180);

            // Place it 3 meters away
            const x = -Math.sin(angle) * 3;
            const z = -Math.cos(angle) * 3;

            world.innerHTML = '';

            // Create a "Grave" sized marker on the floor
            const pin = document.createElement('a-entity');
            
            // Positioned at Y = 0 (The Floor)
            pin.setAttribute('position', `${x} 0 ${z}`); 
            
            pin.innerHTML = `
                <a-cylinder color="red" height="4" radius="0.05" position="0 2 0"></a-cylinder>
                <a-box color="yellow" width="0.8" height="0.01" depth="2" opacity="0.6"></a-box>
            `;
            
            world.appendChild(pin);
        }
    </script>
</body>
</html>